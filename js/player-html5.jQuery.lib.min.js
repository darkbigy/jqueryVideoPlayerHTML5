(function(a){a.fn.jQueryVideoHTML5=function(b){var c=a.extend({version:"SD",theme:"default-theme.html",themePath:"./themes-player-jQ/",defaultVolume:0.5,fontSize:"12pt",displayEmptyStrMenu:false,displayEmptyQualMenu:false,skipStep:5,volumeStep:0.1,activeKeyboard:true,isFullScreenOnPlay:false,autoPlay:false,displayControllerOnlyFullScreen:false,activateContextualDefaultMenu:true,activateContextualCustomMenu:false},b);var e=0;var d=this;var f=false;this.parseTimeCode=function(h){h=Math.floor(h);var g=0;while(h-60>0){h=h-60;g++}var k=h.toString();if(k.length==1){k="0"+k}var j=g.toString();if(j.length==1){j="0"+j}return j+":"+k};this.activateKeyboard=function(g){c.activeKeyboard=g};return this.each(function(){var L=({isHoldingTime:false,isHoldingVolume:false,isFullscreen:false,isTrueFullscreen:false,fsStyle:null,fsVideoStyle:null,video:a(this),parent_container:null,id_video:++e,subs:[],mouseHoverPlayer:false,track_ctr:0,currentPlayPos:0});var E=function(){a.ajax({url:c.themePath+c.theme,dataType:"html",success:function(N){L.video.removeAttr("controls").before(a("<div></div>").attr("class","jqVideo5_wrapper").attr("data-tabindex","0").html(N));L.video.appendTo(a(".jqVideo5_video_container",L.video.prev()));L.parent_container=L.video.parents(".jqVideo5_wrapper");u();m();k();L.video[0].volume=c.defaultVolume;q(false,null);h();v(!c.displayControllerOnlyFullScreen);K();if(c.autoPlay){J()}},error:function(N){alert(N)}})};var K=function(){a(".jqVideo5_context_menu").hide();if(!c.activateContextualDefaultMenu){if(c.activateContextualCustomMenu){a(".button_contex.play").click(function(){J();a(this).blur()});a(".button_contex.fullscreen").click(function(){r();a(this).blur()});a(".button_contex.sound").click(function(){A();a(this).blur()});a(".jqVideo5_context_menu").hover(function(){},function(){a(".jqVideo5_context_menu").hide()});L.video.bind("contextmenu",function(R){var U=(a(".jqVideo5_context_menu").width()/2);var Q=R.pageX-U;var P=R.pageY-L.video.offset().top-U;if(Q<0){Q=0}else{if(Q+(U*2)>L.video.width()){Q=L.video.width()-U*2}}if(P<0){P=0}else{if(P+(U*2)>L.video.height()){P=L.video.height()-(U*2)}}var T=a(".button_contex");T.css("left",((a(".jqVideo5_context_menu").width()-T.width())/2)).css("top",((a(".jqVideo5_context_menu").height()-T.height())/2));var S=360/T.length;var O=U-T.width()/2;var N=U-T.width()/2;T.each(function(W){var X=(S*W)*Math.PI/180;var V=N+(O*Math.cos(X));var Y=N+(O*Math.sin(X));a(this).delay(100*W).animate({left:V,top:Y},100)});a(".jqVideo5_context_menu").css("top",P+"px").css("left",Q+"px").show();return false})}else{L.video.bind("contextmenu",function(){return false})}}};var u=function(){L.video.on("click",function(){J()});L.video.on("timeupdate",function(){h();H()});L.video.on("ended",function(){j()});L.video.on("play",function(){n()});L.video.on("pause",function(){n()});L.video.on("volumechange",function(){w()});L.video.on("progress",function(){G()});L.video.on("canplay",function(){h();a(".jqVideo5_loading_activity").hide()});L.video.on("playing",function(){a(".jqVideo5_loading_activity").hide()});L.video.on("waiting",function(){a(".jqVideo5_loading_activity").show()});a(".jqVideo5_play_btn",L.parent_container).on("click",function(){J();a(this).blur()});a(".jqVideo5_timebar",L.parent_container).mousedown(function(){L.isHoldingTime=true});a(".jqVideo5_timebar",L.parent_container).mouseup(function(N){L.isHoldingTime=false;F(N,true);G()});(a(".jqVideo5_timebar",L.parent_container).parent()).mousemove(function(N){p(N);if(L.isHoldingTime){F(N,false)}});a(".jqVideo5_fullscreen_btn",L.parent_container).click(function(){r();a(this).blur()});a(document).on("mozfullscreenchange",function(){if(!a(document)[0].mozFullScreen&&L.isTrueFullscreen){r()}});a(document).on("webkitfullscreenchange",function(){if(!a(document)[0].webkitIsFullScreen&&L.isTrueFullscreen){r()}});a(".jqVideo5_volumebar",L.parent_container).mousedown(function(){L.isHoldingVolume=true});a(".jqVideo5_volumebar",L.parent_container).mouseup(function(N){L.isHoldingVolume=false;q(true,N)});a(".jqVideo5_volumebar",L.parent_container).mousemove(function(N){if(L.isHoldingVolume){q(true,N)}});a(".jqVideo5_sound_btn",L.parent_container).click(function(){A();a(this).blur()});L.parent_container.hover(function(){L.mouseHoverPlayer=true},function(){L.mouseHoverPlayer=false;if(!L.video[0].paused){M(false)}});L.parent_container.mousemove(function(){g()});a(document).on("keydown",function(N){o(N)})};var v=function(N){if(N){a(".jqVideo5_controls",L.parent_container).show()}else{a(".jqVideo5_controls",L.parent_container).hide()}};var M=function(N){if(N){L.parent_container.css("cursor","auto");a(".jqVideo5_controls",L.parent_container).css("opacity",1)}else{L.parent_container.css("cursor","none");a(".jqVideo5_context_menu").hide();a(".jqVideo5_controls",L.parent_container).css("opacity",0)}};var o=function(N){if(c.activeKeyboard&&N.type=="keydown"){switch(N.keyCode){case 13:if(N.altKey){r()}break;case 32:J();break;case 37:if(L.video[0].currentTime-c.skipStep<0){L.video[0].currentTime=0}else{L.video[0].currentTime-=c.skipStep}break;case 38:if(L.video[0].volume+c.volumeStep>1){L.video[0].volume=1}else{L.video[0].volume+=c.volumeStep}q(false,null);break;case 39:if(L.video[0].currentTime+c.skipStep>L.video[0].duration){L.video[0].currentTime=L.video[0].duration}else{L.video[0].currentTime+=c.skipStep}break;case 40:if(L.video[0].volume-c.volumeStep<0){L.video[0].volume=0}else{L.video[0].volume-=c.volumeStep}q(false,null);break}}};var k=function(){var N=[];a.each(a("source",L.video),function(){var Q=false;for(i=0;i<N.length&&!Q;++i){if(N[i]==a(this).attr("data-version")){Q=true}}if(!Q){N.push(a(this).attr("data-version"))}});if(N.length>1&&N[0]!="undefined"){a(".jqVideo5_version",L.parent_container).html(a(".jqVideo5_menu_title",a(".jqVideo5_version",L.parent_container)));for(i=0;i<N.length;++i){a(".jqVideo5_version",L.parent_container).append('<li class="jqVideo5_version_item"><label><input type="radio" value="'+N[i]+'" name="jqVideo5_current_version_'+L.id_video+'"/> '+N[i]+"</label></li>")}var O=a("input",a(".jqVideo5_version",L.parent_container));var P=0;a(O).each(function(Q){if(a(this).val()==c.version){P=Q}});a(O[P]).prop("checked",true);s();for(i=0;i<O.length;++i){a(O[i]).on("change",function(){s()})}}else{if(!c.displayEmptyQualMenu){a(".jqVideo5_version_list",L.parent_container).css("display","none")}}};var s=function(){var P=a("li.jqVideo5_version_item",L.parent_container);var O=a("input",a(".jqVideo5_version",L.parent_container));var N=0;for(i=0;i<O.length;++i){if(a(O[i]).prop("checked")){a(P[i]).attr("class","jqVideo5_version_item active_track");N=i}else{a(P[i]).attr("class","jqVideo5_version_item")}}x(a(O[N]).val())};var x=function(O){var S=a("source",L.video);var Q=[];for(i=0;i<S.length;++i){if(a(S[i]).attr("data-version")==O){Q.push(S[i])}}var N=false;for(i=0;i<Q.length&&!N;++i){if(L.video[0].canPlayType(a(Q[i]).attr("type"))){var R=L.video[0].paused;var P=L.video[0].currentTime;L.video[0].pause();L.video[0].src=a(Q[i]).attr("src");L.video[0].load();if(!R){J()}L.video.on("loadeddata",function(){L.video[0].currentTime=P});N=true}}};var m=function(){var N=a("track",L.video);var O=0;if(N.length>0){I(0,N)}else{a(".jqVideo5_sub",L.parent_container).css("display","none")}};var I=function(N,P){var O=a(P.get(N));a.ajax({url:O.attr("src"),dataType:"html",success:function(S){if(S!=""){var R=O.attr("kind");if(R==null||R==""){R="subtitles"}B(S,R);if(R=="subtitles"||R=="captions"||R=="descriptions"){var Q=O.attr("label");var T=O.attr("srclang");if(Q!=null){track_label=Q}else{if(T!=null){track_label=T}else{track_label="Track "+(N+1)}}a(".jqVideo5_cc_tracks",L.parent_container).append('<li class="jqVideo5_subtitles_item"><label><input type="radio" value="'+N+'" name="jqVideo5_current_cc_'+L.id_video+'"/> '+track_label+"</label></li>")}++N;if(N<P.length){I(N,P)}else{l(P)}}},error:function(Q){alert(Q)}})};var l=function(O){var P=a("input",a(".jqVideo5_cc_tracks",L.parent_container));var N=0;a(P[0]).attr("value",-1).attr("name",a(P[0]).attr("name")+L.id_video);a(P[0]).on("change",function(){D()});for(i=0;i<O.length;++i){if(a(O[i]).attr("kind")=="subtitles"){if(a(O[i]).attr("srclang")=="lang"&&N==0){N=i+1}if(a(O[i]).is("default")){N=i+1}a(P[i+1]).on("change",function(){D()})}}if(a(P[N])){a(P[N]).prop("checked",true)}else{a(P[0]).prop("checked",true)}D()};var D=function(){var O=a("li.jqVideo5_subtitles_item",L.parent_container);var N=a("input",a(".jqVideo5_cc_tracks",L.parent_container));for(i=0;i<N.length;++i){if(a(N[i]).prop("checked")){if(i==0){a(".jqVideo5_captions",L.parent_container).hide()}a(O[i]).attr("class","jqVideo5_subtitles_item active_track")}else{a(O[i]).attr("class","jqVideo5_subtitles_item")}}};var B=function(Q,P){if(P=="subtitles"||P=="captions"||P=="descriptions"){var O=/^([0-9]+)$/}var U=/^([0-9]{2}:[0-9]{2}:[0-9]{2}[,.]{1}[0-9]{3}) --\> ([0-9]{2}:[0-9]{2}:[0-9]{2}[,.]{1}[0-9]{3})(.*)$/;var V=Q.split(/\r?\n/);var R=[];var S=[];for(i=0;i<V.length;i++){if(identifier=O.exec(V[i])){i++;var N=U.exec(V[i]);if(N&&i<V.length){i++;var T=V[i++];while(V[i]!=""&&i<V.length){T=T+"\n"+V[i];i++}R.push({identifier:identifier[0],start:z(N[1]),stop:z(N[2]),start_tc:N[1],stop_tc:N[2],text:T,settings:N[3]})}}}L.subs.push(R)};var z=function(N){var O=N.split(":");return O[0]*60*60+O[1]*60+parseFloat(O[2].replace(",","."))};var H=function(){var W=a(".jqVideo5_captions",L.parent_container);var aq=a("input",a(".jqVideo5_cc_tracks",L.parent_container));var Z=-1;var R=false;for(var ap=0;ap<aq.length;ap++){if(a(aq[ap]).prop("checked")){Z=a(aq[ap]).val()}}if(Z>-1){for(ap=0;ap<L.subs[Z].length;++ap){if(L.video[0].currentTime>=L.subs[Z][ap].start&&L.video[0].currentTime<=L.subs[Z][ap].stop){R=true;var ah=L.subs[Z][ap].text;var P=L.video.parents(".jqVideo5_captions_wrapper");var N=["jqVideo5_captions_wrapper"];var ar=["jqVideo5_captions"];var V=a("<span></span>").css("text-align","center");var X=a("<p></p>");var af=a("<span></span>");var ac=a("<span></span>");var T=/<v ([^>]+)>/i;while(test_vd=T.exec(ah)){ah=ah.replace(test_vd[0],'<span class="'+test_vd[1].replace(" ","_")+'">')}var at=/<c\.([a-z0-9-_.]+)>/i;while(test_classes=at.exec(ah)){var aj=test_classes[1].replace("."," ");ah=ah.replace(test_classes[0],'<span class="'+aj+'">')}ah=ah.replace(/(<\/v>|<\/c>)/ig,"</span>");var ae=/<([0-9]{2}:[0-9]{2}:[0-9]{2}[,.]{1}[0-9]{3})>/;var ao=false;while(test_timestamps=ae.exec(ah)){if(this.tc2sec(test_timestamps[1])<this.params.video.currentTime){ah=ah.replace(test_timestamps[0],'</span><span class="jqVideo5_cue_past">')}else{ah=ah.replace(test_timestamps[0],'</span><span class="jqVideo5_cue_future">')}ao=true}if(ao){ah='<span class="jqVideo5_cue_past">'+ah}if(L.subs[Z][ap].settings!=""){var U=/(A|align):(start|middle|end)/i;var ad=/(S|size):([0-9]{0,3})%/i;var ag=/(T|position):([0-9]{0,3})%/i;var S=/(D|vertical):(vertical-lr|vertical|lr|rl)/i;var Y=/(L|line):(-?[0-9]{0,3})(%?)/i;var O=U.exec(L.subs[Z][ap].settings);var al=ad.exec(L.subs[Z][ap].settings);var an=ag.exec(L.subs[Z][ap].settings);var ab=S.exec(L.subs[Z][ap].settings);var am=Y.exec(L.subs[Z][ap].settings);if(O){if(O[2]=="start"){X.css("text-align","left")}else{if(O[2]=="middle"){X.css("text-align","center")}else{if(O[2]=="end"){X.css("text-align","right")}}}}if(an&&an[2]>=0&&an[2]<50){V.css("text-align","left");X.css("margin-left",an[1]+"%")}else{if(an&&an[2]>50&&an[2]<=100){V.css("text-align","right");X.css("margin-left",(100-an[2])+"%")}}if(al){var aa=(al[2]/100)*parseInt(this.config.fontSize);X.css("font-size",aa+"pt")}if(ab){ac.css("display","block");ac.css("min-height","5px");ac.css("min-width","1px");ah='<span style="'+ac.attr("style")+'">'+ah.split("").join('</span><span style="'+ac.attr("style")+'">')+"</span>";ah=ah.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1</span><br /><span>$2");af.css("display","block").css("padding","5px").css("text-align","center");if(ab[2]=="vertical-lr"||ab[2]=="lr"){af.css("float","left");X.css("float","left")}else{af.css("float","right");X.css("float","right")}af.css("background-color","rgba(0,0,0,0.75)");X.css("background","none");V.css("top","0");ah=ah.replace(/<br \/>/,'</span><span style="'+af.attr("style")+'">');ah=ah.replace(/<span>(\r\n|\n\r|\r|\n)<\/span>/g,"")}if(am&&am[2]>=-100&&am[2]<=100){if(am[3]=="%"){var Q=(am[2]<0)?"bottom":"top";var ak=Math.abs(am[2]);V.css(Q,ak+"%")}}}if(L.isFullscreen){var ai=Math.round((window.innerHeight-30)/L.fsVideoStyle.height*100)/100;X.css("font-size",Math.round(parseInt(c.fontSize)*ai)+"pt")}P.attr("class",N.join(" "));W.attr("class",ar.join(" ")).attr("style",V.attr("style")).css("visibility","visible").css("bottom",a(".jqVideo5_controls",L.parent_container).css("height"));if(!ab){ah=ah.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,'$1</span><br /><span style="'+af.attr("style")+'">$2')}W.html(X.append(af.append(ah)))}}if(!R){W.hide()}}else{W.hide()}};var r=function(){if(c.activateContextualCustomMenu){a(".jqVideo5_context_menu").hide()}var O=a(".jqVideo5_wrapper");var Q=L.parent_container;var N=a(".jqVideo5_captions",Q);if(!L.isFullscreen){v(true);for(i=0;i<O.length;++i){O.css("visibility","hidden")}Q.css("visibility","visible");L.fsStyle=({height:Q.css("height"),width:Q.css("width")});L.fsVideoStyle=({height:L.video.height(),width:L.video.width()});if((a("html")[0]).requestFullscreen){L.isTrueFullscreen=true;(a("html")[0]).requestFullscreen()}else{if((a("html")[0]).mozRequestFullScreen){L.isTrueFullscreen=true;(a("html")[0]).mozRequestFullScreen()}else{if((a("html")[0]).webkitRequestFullScreen){L.isTrueFullscreen=true;(a("html")[0]).webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}}}if(L.isTrueFullscreen){Q.css("position","fixed").css("top",0).css("left",0).css("height","100%").css("width","100%").css("backgroundColor","#000000");L.video.css("width","100%").css("height",(screen.height-30)+"px");a("body").css("overflow","hidden")}else{Q.css("position","fixed").css("top",0).css("left","50%").css("height",screen.height+"px").css("width",screen.width+"px").css("background-color","#000000").css("margin-left","-"+Math.round(Q.width()/2)+"px");L.video.css("width",a(window).innerWidth()+"px").css("height",(a(window).innerHeight()-30)+"px");a("body").css("overflow","hidden")}L.isFullscreen=true;Q.attr("class",Q.attr("class")+(Q.attr("class")?" ":"")+"jqVideo5_is_fullscreen");var P=Math.round((window.innerHeight-30)/L.fsVideoStyle.height*100)/100;a("p",a(".jqVideo5_captions",L.parent_container)).css("font-size",Math.round(parseInt(c.fontSize)*P)+"pt")}else{if(c.isFullScreenOnPlay&&!L.video[0].paused){J()}v(!c.displayControllerOnlyFullScreen);a("body").css("cursor","auto");if(a(document)[0].cancelFullscreen){a(document)[0].cancelFullscreen()}else{if(a(document)[0].exitFullscreen){a(document)[0].exitFullscreen()}else{if(a(document)[0].mozCancelFullScreen){a(document)[0].mozCancelFullScreen()}else{if(a(document)[0].webkitCancelFullScreen){a(document)[0].webkitCancelFullScreen()}}}}for(i=0;i<O.length;++i){O.css("visibility","visible")}Q.css("position","inherit").css("left",0).css("height",L.fsStyle.height).css("width",L.fsStyle.width).css("background-color","transparent").css("margin-left",0);L.video.css("height",L.fsVideoStyle.height+"px").css("width",L.fsVideoStyle.width+"px");a("body").css("overflow","auto");L.isFullscreen=false;L.isTrueFullscreen=false;Q.attr("class",Q.attr("class").replace(new RegExp("(\\s|^)jqVideo5_is_fullscreen(\\s|$)")," ").replace(/^\s+|\s+$/g,""));a("p",a(".jqVideo5_captions",L.parent_container)).css("font-size","")}a(".jqVideo5_video_container",Q).css("height",L.video.height()+"px")};var g=function(){if(!L.video[0].paused&&L.mouseHoverPlayer){C()}};var C=function(){M(true);clearTimeout(f);f=setTimeout(function(){M(false)},3000)};var q=function(O,P){var S=0;if(O){var Q=a(".jqVideo5_volumebar",L.parent_container);var R=t(Q[0]);var N=P.pageY-R.y;S=100-Math.round(N*100/Q.height());if(S>0){L.video[0].muted=false}}else{S=L.video[0].volume*100}if(S<=100){if(S<0){S=0;L.video[0].muted=true}a(".jqVideo5_volumebar_inner",L.parent_container).css("height",S.toString()+"%");L.video[0].volume=S/100;a(".jqVideo5_volume_ctrl",L.parent_container).attr("aria-valuenow",S/100)}};var A=function(){if(!L.video[0].muted){L.video[0].muted=true}else{L.video[0].muted=false}if(L.video[0].volume==0){L.video[0].volume=c.defaultVolume;q(false,null)}};var t=function(O){var N=y=0;if(O.offsetParent){do{N+=O.offsetLeft;y+=O.offsetTop}while(O=O.offsetParent)}return{x:N,y:y}};var F=function(O,S){var R=a(".jqVideo5_timebar",L.parent_container);var Q=t(R[0]);var N=O.clientX-Q.x;var P=Math.round(N*100/R[0].offsetWidth);a(".jqVideo5_timebar_inner",L.parent_container).css("width",P.toString()+"%");if(S){L.video[0].currentTime=Math.round(P*L.video[0].duration/100)}G()};var p=function(O){var S=a(".jqVideo5_timebar",L.parent_container);var Q=a(".jqVideo5_timebar_notice",L.parent_container);var R=t(S[0]);var N=O.clientX-R.x;var P=Math.round(N*100/S[0].offsetWidth);if(P<0){P=0}if(a.isNumeric(L.video[0].duration)){Q.html(d.parseTimeCode(Math.round(P*L.video[0].duration/100)))}Q.css("marginLeft",(N+3-Q[0].offsetWidth/2)+"px")};var G=function(){if(!L.video[0].paused){if(L.video[0].currentTime==L.currentPlayPos){a(".jqVideo5_loading_activity").show()}else{a(".jqVideo5_loading_activity").hide()}}else{a(".jqVideo5_loading_activity").hide()}L.currentPlayPos=L.video[0].currentTime;if(L.video[0].buffered.length==0){return}var O=L.video[0].buffered.end(L.video[0].buffered.length-1);for(i=0;i<L.video[0].buffered.length;++i){if(L.video[0].buffered.start(i)<L.video[0].currentTime&&L.video[0].currentTime<L.video[0].buffered.end(i)){O=L.video[0].buffered.end(i)}}if(O==L.video[0].duration){a(".jqVideo5_timebar_buffer",L.parent_container).css("width",(a(".jqVideo5_timebar",L.parent_container).width())+"px")}else{var P=a(".jqVideo5_timebar",L.parent_container).width();var N=Math.round((O*P)/L.video[0].duration);a(".jqVideo5_timebar_buffer",L.parent_container).css("width",N+"px")}};var w=function(){if(L.video[0].volume==0||L.video[0].muted){a(".jqVideo5_sound_btn").addClass("mute");a(".button_contex.sound").addClass("mute")}else{if(a(".jqVideo5_sound_btn").hasClass("mute")){a(".jqVideo5_sound_btn").removeClass("mute");a(".button_contex.sound").removeClass("mute")}}};var n=function(){a(".jqVideo5_play_btn").toggleClass("pause");if(c.activateContextualCustomMenu){a(".button_contex.play").toggleClass("pause")}};var j=function(){L.video[0].currentTime=0;L.video[0].pause();a(".jqVideo5_play_btn").toggleClass("pause");M(true)};var h=function(){a(".jqVideo5_timebar",L.parent_container).attr("aria-valuemax",Math.round(L.video[0].duration*100)/100);a(".jqVideo5_timebar",L.parent_container).attr("aria-valuenow",L.video[0].currentTime);a(".jqVideo5_video_curpos",L.parent_container).html(d.parseTimeCode(L.video[0].currentTime));if(a(".jqVideo5_video_duration",L.parent_container).html()=="00:00"||d.parseTimeCode(L.video[0].duration!=a(".jqVideo5_video_duration",L.parent_container).html())){if(a.isNumeric(L.video[0].duration)){a(".jqVideo5_video_duration",L.parent_container).html(d.parseTimeCode(L.video[0].duration))}}if(!L.isHoldingTime){a(".jqVideo5_timebar_inner",L.parent_container).css("width",L.video[0].currentTime*100/L.video[0].duration+"%")}};var J=function(){if(L.video[0].paused){L.video[0].play();M(L.mouseHoverPlayer);C();if(c.isFullScreenOnPlay&&!L.isFullscreen){r()}}else{L.video[0].pause();M(true);clearTimeout(f)}};E();return a(this)})}})(jQuery);