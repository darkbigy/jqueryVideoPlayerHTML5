(function(e){e.fn.jQueryVideoHTML5=function(t){var n=e.extend({version:"SD",language:"en",theme:"default-theme.html",themePath:"http://localhost/plugin%20JQuery//themes-player-jQ/",defaultVolume:.5,fontSize:"12pt",displayEmptyStrMenu:false,displayEmptyQualMenu:false},t);var r=0;return this.each(function(){var t={"iht.":false,ihv:false,ifs:false,itf:false,fs:null,fvs:null,v:e(this),pc:null,idv:++r,ct:-1,subs:[]};this.getVideo=function(){return t.v};var o=function(){e.ajax({url:n.themePath+n.theme,dataType:"html",success:function(r){t.v.removeAttr("controls").before(e("<div></div>").attr("class","jqVideo5_wrapper").attr("data-tabindex","0").html(r));t.v.appendTo(e(".jqVideo5_video_container",t.v.prev()));t.pc=t.v.parents(".jqVideo5_wrapper");u();c();a();t.v[0].volume=n.defaultVolume;E(false,null);O()},error:function(e){alert(e)}})};var u=function(){t.v.on("click",function(){_()});t.v.on("timeupdate",function(){O();g()});t.v.on("ended",function(){A()});t.v.on("play",function(){L()});t.v.on("pause",function(){L()});t.v.on("volumechange",function(){k()});t.v.on("progress",function(){C()});t.v.on("loadstart",function(){O()});e(".jqVideo5_play_btn",t.pc).on("click",function(){_()});e(".jqVideo5_timebar",t.pc).on("mousedown",function(){t.iht=true});e(".jqVideo5_timebar",t.pc).on("mouseup",function(e){t.iht=false;T(e,true)});e(".jqVideo5_timebar",t.pc).parent().on("mousemove",function(e){N(e);if(t.iht){T(e,false)}});e(".jqVideo5_fullscreen_btn",t.pc).on("click",function(){b()});e(document).on("mozfullscreenchange",function(){if(!e(document)[0].mozFullScreen&&t.itf){b()}});e(document).on("webkitfullscreenchange",function(){if(!e(document)[0].webkitIsFullScreen&&t.itf){b()}});e(".jqVideo5_volumebar",t.pc).on("mousedown",function(){t.ihv=true});e(".jqVideo5_volumebar",t.pc).on("mouseup",function(e){t.ihv=false;E(true,e)});e(".jqVideo5_volumebar",t.pc).on("mousemove",function(e){if(t.ihv){E(true,e)}});e(".jqVideo5_sound_btn",t.pc).on("click",function(){S()});e(".jqVideo5_wrapper").hover(function(){w(true)},function(){w(false)})};var a=function(){var r=[];e.each(e("source",t.v),function(){var t=false;for(i=0;i<r.length&&!t;++i){if(r[i]==e(this).attr("data-version")){t=true}}if(!t){r.push(e(this).attr("data-version"))}});if(r.length>1&&r[0]!="undefined"){e(".jqVideo5_version",t.pc).html(e(".jqVideo5_menu_title",e(".jqVideo5_version",t.pc)));for(i=0;i<r.length;++i){e(".jqVideo5_version",t.pc).append('<li class="jqVideo5_version_item"><label>'+'<input type="radio" value="'+r[i]+'" name="jqVideo5_current_version_'+t.idv+'"/> '+r[i]+"</label></li>")}var o=e("input",e(".jqVideo5_version",t.pc));for(i=0;i<o.length;++i){if(e(o[i]).val()==n.version||e(o[i]).val()==e('source[src="'+t.v[0].currentSrc+'"]',t.v).attr("data-version")){e(o[i]).prop("checked",true);break}}f();for(i=0;i<o.length;++i){e(o[i]).on("change",function(){f()})}}else if(!n.displayEmptyQualMenu){e(".jqVideo5_version_list",t.pc).css("display","none")}};var f=function(){var n=e("li.jqVideo5_version_item",t.pc);var r=e("input",e(".jqVideo5_version",t.pc));for(i=0;i<r.length;++i){if(e(r[i]).prop("checked")){e(n[i]).attr("class","jqVideo5_version_item active_track");l(e(r[i]).val())}else{e(n[i]).attr("class","jqVideo5_version_item")}}};var l=function(n){var r=e("source",t.v);var s=[];for(i=0;i<r.length;++i){if(e(r[i]).attr("data-version")==n){s.push(r[i])}}var o=false;for(i=0;i<s.length&&!o;++i){if(t.v[0].canPlayType(e(s[i]).attr("type"))){var u=t.v[0].paused;var a=t.v[0].currentTime;t.v[0].pause();t.v[0].src=e(s[i]).attr("src");t.v[0].load();if(!u){_()}t.v.on("loadeddata",function(){t.v[0].currentTime=a});o=true}}};var c=function(){var n=e("track",t.v);var r=0;if(n.length>0){h(0,n)}else{e(".jqVideo5_sub",t.pc).css("display","none")}};var h=function(n,r){var i=e(r.get(n));e.ajax({url:i.attr("src"),dataType:"html",success:function(s){if(s!=""){var o=i.attr("kind");if(o==null||o==""){o="subtitles"}v(s,o);if(o=="subtitles"||o=="captions"||o=="descriptions"){var u=i.attr("label");var a=i.attr("srclang");if(u!=null){track_label=u}else if(a!=null){track_label=a}else{track_label="Track "+(n+1)}e(".jqVideo5_cc_tracks",t.pc).append('<li class="jqVideo5_subtitles_item"><label>'+'<input type="radio" value="'+n+'" name="jqVideo5_current_cc_'+t.idv+'"/> '+track_label+"</label></li>")}++n;if(n<r.length){h(n,r)}else{p(r)}}},error:function(e){alert(e)}})};var p=function(n){var r=e("input",e(".jqVideo5_cc_tracks",t.pc));var s=0;e(r[0]).attr("value",-1).attr("name",e(r[0]).attr("name")+t.idv);e(r[0]).on("change",function(){d()});for(i=0;i<n.length;++i){if(e(n[i]).attr("kind")=="subtitles"){if(e(n[i]).attr("srclang")=="lang"&&s==0){s=i+1}if(e(n[i]).is("default")){s=i+1}e(r[i+1]).on("change",function(){d()})}}if(e(r[s])){e(r[s]).prop("checked",true)}else{e(r[0]).prop("checked",true)}d()};var d=function(){var n=e("li.jqVideo5_subtitles_item",t.pc);var r=e("input",e(".jqVideo5_cc_tracks",t.pc));for(i=0;i<r.length;++i){if(e(r[i]).prop("checked")){e(n[i]).attr("class","jqVideo5_subtitles_item active_track")}else{e(n[i]).attr("class","jqVideo5_subtitles_item")}}};var v=function(e,n){if(n=="subtitles"||n=="captions"||n=="descriptions"){var r=/^([0-9]+)$/}var s=/^([0-9]{2}:[0-9]{2}:[0-9]{2}[,.]{1}[0-9]{3}) --\> ([0-9]{2}:[0-9]{2}:[0-9]{2}[,.]{1}[0-9]{3})(.*)$/;var o=e.split(/\r?\n/);var u=[];for(i=0;i<o.length;i++){if(identifier=r.exec(o[i])){i++;var a=s.exec(o[i]);if(a&&i<o.length){i++;var f=o[i++];while(o[i]!=""&&i<o.length){f=f+"\n"+o[i];i++}u.push({identifier:identifier[0],start:m(a[1]),stop:m(a[2]),start_tc:a[1],stop_tc:a[2],txt:f,settings:a[3]})}}t.subs.push(u)}};var m=function(e){var t=e.split(":");return t[0]*60*60+t[1]*60+parseFloat(t[2].replace(",","."))};var g=function(){var r=e(".jqVideo5_captions",t.pc);var o=e("input",e(".jqVideo5_cc_tracks",t.pc));for(i=0;i<o.length;i++){if(e(o[i]).prop("checked")){t.ct=e(o[i]).val()}}if(t.ct>=0){for(i=0;i<t.subs[t.ct].length;i++){if(t.v[0].currentTime>=t.subs[t.ct][i].start&&t.v[0].currentTime<=t.subs[t.ct][i].stop){var u=t.subs[t.ct][i].txt;var a=t.v.parents(".jqVideo5_captions_wrapper");var f=["jqVideo5_captions_wrapper"];var l=["jqVideo5_captions"];var c=e("<span></span>").css("text-align","center");var h=e("<p></p>");var p=e("<span></span>");var d=e("<span></span>");var v=/<v ([^>]+)>/i;while(test_vd=v.exec(u)){u=u.replace(test_vd[0],'<span class="'+test_vd[1].replace(" ","_")+'">')}var m=/<c\.([a-z0-9-_.]+)>/i;while(test_classes=m.exec(u)){var g=test_classes[1].replace("."," ");u=u.replace(test_classes[0],'<span class="'+g+'">')}u=u.replace(/(<\/v>|<\/c>)/ig,"</span>");var y=/<([0-9]{2}:[0-9]{2}:[0-9]{2}[,.]{1}[0-9]{3})>/;var b=false;while(test_timestamps=y.exec(u)){if(this.tc2sec(test_timestamps[1])<this.p.v.currentTime){u=u.replace(test_timestamps[0],'</span><span class="jqVideo5_cue_past">')}else{u=u.replace(test_timestamps[0],'</span><span class="jqVideo5_cue_future">')}b=true}if(b){u='<span class="jqVideo5_cue_past">'+u}if(t.subs[t.ct][i].settings!=""){var w=/(A|align):(start|middle|end)/i;var E=/(S|size):([0-9]{0,3})%/i;var S=/(T|position):([0-9]{0,3})%/i;var x=/(D|vertical):(vertical-lr|vertical|lr|rl)/i;var T=/(L|line):(-?[0-9]{0,3})(%?)/i;var N=w.exec(t.subs[t.ct][i].settings);var C=E.exec(t.subs[t.ct][i].settings);var k=S.exec(t.subs[t.ct][i].settings);var L=x.exec(t.subs[t.ct][i].settings);var A=T.exec(t.subs[t.ct][i].settings);if(N){if(N[2]=="start"){h.css("text-align","left")}else if(N[2]=="middle"){h.css("text-align","center")}else if(N[2]=="end"){h.css("text-align","right")}}if(k&&k[2]>=0&&k[2]<50){c.css("text-align","left");h.css("margin-left",k[1]+"%")}else if(k&&k[2]>50&&k[2]<=100){c.css("text-align","right");h.css("margin-left",100-k[2]+"%")}if(C){var O=C[2]/100*parseInt(this.config.fontSize);h.css("font-size",O+"pt")}if(L){d.css("display","block");d.css("min-height","5px");d.css("min-width","1px");u='<span style="'+d.attr("style")+'">'+u.split("").join('</span><span style="'+d.attr("style")+'">')+"</span>";u=u.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1</span><br /><span>$2");p.css("display","block").css("padding","5px").css("text-align","center");if(L[2]=="vertical-lr"||L[2]=="lr"){p.css("float","left");h.css("float","left")}else{p.css("float","right");h.css("float","right")}p.css("background-color","rgba(0,0,0,0.75)");h.css("background","none");c.css("top","0");u=u.replace(/<br \/>/,'</span><span style="'+p.attr("style")+'">');u=u.replace(/<span>(\r\n|\n\r|\r|\n)<\/span>/g,"")}if(A&&A[2]>=-100&&A[2]<=100){if(A[3]=="%"){var M=A[2]<0?"bottom":"top";var _=Math.abs(A[2]);c.css(M,_+"%")}}}if(t.ifs){var D=Math.round((window.innerHeight-30)/t.fvs.height*100)/100;h.css("font-size",Math.round(parseInt(n.fontSize)*D)+"pt")}a.attr("class",f.join(" "));r.attr("class",l.join(" ")).attr("style",c.attr("style")).css("visibility","visible").css("bottom",e(".jqVideo5_controls",t.pc).css("height"));if(!L){u=u.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,'$1</span><br /><span style="'+p.attr("style")+'">$2')}r.html(h.append(p.append(u)))}}}};var b=function(){var r=e(".jqVideo5_wrapper");var o=t.pc;if(!t.ifs){for(i=0;i<r.length;++i){r.css("visibility","hidden")}o.css("visibility","visible");t.fs={height:o.css("height"),width:o.css("width")};t.fvs={height:t.v.height(),width:t.v.width()};if(e("html")[0].requestFullscreen){t.itf=true;e("html")[0].requestFullscreen()}else if(e("html")[0].mozRequestFullScreen){t.itf=true;e("html")[0].mozRequestFullScreen()}else if(e("html")[0].webkitRequestFullScreen){t.itf=true;e("html")[0].webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}if(t.itf){o.css("position","fixed").css("top",0).css("left",0).css("height","100%").css("width","100%").css("backgroundColor","#000000");t.v.css("width","100%").css("height",screen.height-30+"px");e("body").css("overflow","hidden")}else{o.css("position","fixed").css("top",0).css("left","50%").css("height",screen.height+"px").css("width",screen.width+"px").css("background-color","#000000").css("margin-left","-"+Math.round(o.width()/2)+"px");t.v.css("width",e(window).innerWidth()+"px").css("height",e(window).innerHeight()-30+"px");e("body").css("overflow","hidden")}t.ifs=true;o.attr("class",o.attr("class")+(o.attr("class")?" ":"")+"jqVideo5_is_fullscreen");var u=Math.round((window.innerHeight-30)/t.fvs.height*100)/100;e("p",e(".jqVideo5_captions",t.pc)).css("font-size",Math.round(parseInt(n.fontSize)*u)+"pt")}else{if(e(document)[0].cancelFullscreen){e(document)[0].cancelFullscreen()}else if(e(document)[0].exitFullscreen){e(document)[0].exitFullscreen()}else if(e(document)[0].mozCancelFullScreen){e(document)[0].mozCancelFullScreen()}else if(e(document)[0].webkitCancelFullScreen){e(document)[0].webkitCancelFullScreen()}for(i=0;i<r.length;++i){r.css("visibility","visible")}o.css("position","inherit").css("left",0).css("height",t.fs.height).css("width",t.fs.width).css("background-color","transparent").css("margin-left",0);t.v.css("height",t.fvs.height+"px").css("width",t.fvs.width+"px");e("body").css("overflow","auto");t.ifs=false;t.itf=false;o.attr("class",o.attr("class").replace(new RegExp("(\\s|^)jqVideo5_is_fullscreen(\\s|$)")," ").replace(/^\s+|\s+$/g,""));e("p",e(".jqVideo5_captions",t.pc)).css("font-size","")}e(".jqVideo5_video_container",o).css("height",t.v.height()+"px")};var w=function(n){if(!t.v[0].paused){if(n){e(".jqVideo5_controls",t.pc).css("opacity",1)}else{e(".jqVideo5_controls",t.pc).css("opacity",0)}}};var E=function(n,r){var i=0;if(n){var s=e(".jqVideo5_volumebar",t.pc);var o=x(s[0]);var u=r.pageY-o.y;i=100-Math.round(u*100/s.height());if(i>0){t.v[0].muted=false}}else{i=t.v[0].volume*100}if(i<=100){if(i<0){i=0;t.v[0].muted=true}e(".jqVideo5_volumebar_inner",t.pc).css("height",i.toString()+"%");t.v[0].volume=i/100;e(".jqVideo5_volume_ctrl",t.pc).attr("aria-valuenow",i/100)}};var S=function(){if(!t.v[0].muted){t.v[0].muted=true}else{t.v[0].muted=false}if(t.v[0].volume==0){t.v[0].volume=n.defaultVolume;E(false,null)}};var x=function(e){var t=y=0;if(e.offsetParent){do{t+=e.offsetLeft;y+=e.offsetTop}while(e=e.offsetParent)}return{x:t,y:y}};var T=function(n,r){var i=e(".jqVideo5_timebar",t.pc);var s=x(i[0]);var o=n.clientX-s.x;var u=Math.round(o*100/i.width());e(".jqVideo5_timebar_inner",t.pc).css("width",u.toString()+"%");if(r){t.v[0].currentTime=Math.round(u*t.v[0].duration/100)}};var N=function(n){var r=e(".jqVideo5_timebar",t.pc);var i=e(".jqVideo5_timebar_notice",t.pc);var s=x(r[0]);var o=n.clientX-s.x;var u=Math.round(o*100/r.width());if(u<0){u=0}i.html(M(Math.round(u*t.v[0].duration/100)));i.css("marginLeft",o+3-i.width()/2+"px")};var C=function(){if(t.v[0].buffered.length==0){return}var n=t.v[0].buffered.end(0);if(n==t.v[0].duration){e(".jqVideo5_timebar_buffer",t.pc).css("width",e(".jqVideo5_timebar",t.pc).css("offsetWidth")-2+"px")}else{var r=e(".jqVideo5_timebar",t.pc).css("offsetWidth");var i=Math.round(n*r/t.v[0].duration);e(".jqVideo5_timebar_buffer",t.pc).css("width",i+"px")}};var k=function(){if(t.v[0].volume==0||t.v[0].muted){e(".jqVideo5_sound_btn").addClass("mute")}else if(e(".jqVideo5_sound_btn").hasClass("mute")){e(".jqVideo5_sound_btn").removeClass("mute")}};var L=function(){e(".jqVideo5_play_btn").toggleClass("pause")};var A=function(){t.v[0].currentTime=0;t.v[0].pause();e(".jqVideo5_play_btn").toggleClass("pause");e(".jqVideo5_controls",t.pc).css("opacity",1)};var O=function(){e(".jqVideo5_timebar",t.pc).attr("aria-valuemax",Math.round(t.v[0].duration*100)/100);e(".jqVideo5_timebar",t.pc).attr("aria-valuenow",t.v[0].currentTime);e(".jqVideo5_video_curpos",t.pc).html(M(t.v[0].currentTime));if(e(".jqVideo5_video_duration",t.pc).html()=="00:00"||M(t.v[0].duration!=e(".jqVideo5_video_duration",t.pc).html())){e(".jqVideo5_video_duration",t.pc).html(M(t.v[0].duration))}if(!t.iht){e(".jqVideo5_timebar_inner",t.pc).css("width",t.v[0].currentTime*100/t.v[0].duration+"%")}};var M=function(e){e=Math.floor(e);var t=0;while(e-60>0){e=e-60;t++}var n=e.toString();if(n.length==1){n="0"+n}var r=t.toString();if(r.length==1){r="0"+r}return r+":"+n};var _=function(){if(t.v[0].paused){t.v[0].play()}else{t.v[0].pause()}};o()})}})(jQuery)